{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { uuid } from './uuid';\nimport * as i0 from \"@angular/core\";\n// Simple in-memory service. You can replace by storage/localForage later.\nexport let ExpenseService = /*#__PURE__*/(() => {\n  class ExpenseService {\n    constructor() {\n      this._expenses = [];\n      this.expenses$ = new BehaviorSubject([]);\n      this.limit$ = new BehaviorSubject(300000);\n      this.notifications$ = new BehaviorSubject(true);\n      // seed sample data\n      this._expenses = [{\n        id: uuid(),\n        amount: 50000,\n        category: 'Alimentación',\n        date: new Date().toISOString(),\n        description: 'Supermercado',\n        type: 'expense'\n      }, {\n        id: uuid(),\n        amount: 80000,\n        category: 'Entretenimiento',\n        date: new Date().toISOString(),\n        description: 'Cine',\n        type: 'expense'\n      }, {\n        id: uuid(),\n        amount: 200000,\n        category: 'Sueldo',\n        date: new Date().toISOString(),\n        description: 'Pago',\n        type: 'income'\n      }];\n      this.emit();\n    }\n    emit() {\n      this.expenses$.next([...this._expenses]);\n    }\n    add(e) {\n      e.id = uuid();\n      this._expenses.push(e);\n      this.emit();\n    }\n    getBalance() {\n      const income = this._expenses.filter(x => x.type === 'income').reduce((s, x) => s + x.amount, 0);\n      const expense = this._expenses.filter(x => x.type === 'expense').reduce((s, x) => s + x.amount, 0);\n      return income - expense;\n    }\n    getByCategory() {\n      const map = new Map();\n      this._expenses.filter(x => x.type === 'expense').forEach(e => {\n        const prev = map.get(e.category) || 0;\n        map.set(e.category, prev + e.amount);\n      });\n      return Array.from(map.entries()).map(([cat, sum]) => ({\n        category: cat,\n        amount: sum\n      }));\n    }\n    setLimit(value) {\n      this.limit$.next(value);\n    }\n    setNotifications(enabled) {\n      this.notifications$.next(enabled);\n    }\n  }\n  ExpenseService.ɵfac = function ExpenseService_Factory(t) {\n    return new (t || ExpenseService)();\n  };\n  ExpenseService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ExpenseService,\n    factory: ExpenseService.ɵfac\n  });\n  return ExpenseService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}